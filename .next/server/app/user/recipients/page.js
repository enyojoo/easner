(()=>{var e={};e.id=663,e.ids=[663],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},17360:e=>{"use strict";e.exports=require("url")},71568:e=>{"use strict";e.exports=require("zlib")},98509:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>o,routeModule:()=>x,tree:()=>d}),a(1357),a(85476),a(22662),a(35866);var r=a(23191),t=a(88716),n=a(37922),l=a.n(n),i=a(95231),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);a.d(s,c);let d=["",{children:["user",{children:["recipients",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,1357)),"D:\\Users\\enyoc\\Documents\\Dev\\easner\\app\\user\\recipients\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,85476)),"D:\\Users\\enyoc\\Documents\\Dev\\easner\\app\\user\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,22662)),"D:\\Users\\enyoc\\Documents\\Dev\\easner\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],o=["D:\\Users\\enyoc\\Documents\\Dev\\easner\\app\\user\\recipients\\page.tsx"],m="/user/recipients/page",u={require:a,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/user/recipients/page",pathname:"/user/recipients",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},85765:(e,s,a)=>{Promise.resolve().then(a.bind(a,95277))},95277:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>g});var r=a(10326),t=a(17577),n=a(35545),l=a(33071),i=a(90772),c=a(54432),d=a(45842),o=a(34474),m=a(62288),u=a(83855),x=a(88307),p=a(69508),h=a(98091),f=a(38760),y=a(51813),N=a(40934);let j=({isEdit:e=!1,formData:s,setFormData:a,error:t,isSubmitting:n,currencies:l,onSubmit:m})=>{let u=l.find(e=>e.code===s.currency);return(0,r.jsxs)("div",{className:"space-y-4",children:[t&&r.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:r.jsx("p",{className:"text-sm text-red-600",children:t})}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(d._,{htmlFor:"name",children:"Full Name"}),r.jsx(c.I,{id:"name",value:s.name,onChange:e=>a({...s,name:e.target.value}),placeholder:"Enter recipient's full name",disabled:n})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(d._,{htmlFor:"accountNumber",children:"Account Number"}),r.jsx(c.I,{id:"accountNumber",value:s.accountNumber,onChange:e=>a({...s,accountNumber:e.target.value}),placeholder:"Enter account number",disabled:n})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(d._,{htmlFor:"bankName",children:"Bank Name"}),r.jsx(c.I,{id:"bankName",value:s.bankName,onChange:e=>a({...s,bankName:e.target.value}),placeholder:"Enter bank name",disabled:n})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(d._,{htmlFor:"currency",children:"Currency"}),(0,r.jsxs)(o.Ph,{value:s.currency,onValueChange:e=>a({...s,currency:e}),disabled:e||n,children:[r.jsx(o.i4,{className:"w-full",children:r.jsx(o.ki,{children:u&&(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-6 h-4 rounded-sm overflow-hidden",dangerouslySetInnerHTML:{__html:u.flag_svg}}),(0,r.jsxs)("span",{children:[u.code," - ",u.name]})]})})}),r.jsx(o.Bw,{className:"max-h-60",children:l.map(e=>r.jsx(o.Ql,{value:e.code,children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-6 h-4 rounded-sm overflow-hidden",dangerouslySetInnerHTML:{__html:e.flag_svg}}),(0,r.jsxs)("span",{children:[e.code," - ",e.name]})]})},e.code))})]})]}),r.jsx(i.z,{onClick:m,className:"w-full bg-easner-primary hover:bg-easner-primary-600",disabled:!s.name||!s.accountNumber||!s.bankName||n,children:n?"Saving...":e?"Update Recipient":"Add Recipient"})]})};function g(){let{userProfile:e}=(0,y.a)(),{recipients:s,currencies:a,refreshRecipients:d}=(0,N.v)(),[g,b]=(0,t.useState)(!1),[v,w]=(0,t.useState)(null),[_,k]=(0,t.useState)(""),[C,S]=(0,t.useState)("all"),[P,Z]=(0,t.useState)({name:"",accountNumber:"",bankName:"",currency:"NGN"}),[D,q]=(0,t.useState)(!1),[E,R]=(0,t.useState)(""),[z,M]=(0,t.useState)(null),[A,F]=(0,t.useState)({}),G=s.filter(e=>{let s=e.full_name.toLowerCase().includes(_.toLowerCase())||e.account_number.includes(_),a="all"===C||e.currency===C;return s&&a}),U=async()=>{if(e?.id)try{q(!0),R(""),await f.tE.create(e.id,{fullName:P.name,accountNumber:P.accountNumber,bankName:P.bankName,currency:P.currency}),await d(),R(""),Z({name:"",accountNumber:"",bankName:"",currency:"NGN"}),b(!1)}catch(e){console.error("Error adding recipient:",e),R("Failed to add recipient")}finally{q(!1)}},V=e=>{w(e),Z({name:e.full_name,accountNumber:e.account_number,bankName:e.bank_name,currency:e.currency})},I=async()=>{if(v)try{q(!0),R(""),await f.tE.update(v.id,{fullName:P.name,accountNumber:P.accountNumber,bankName:P.bankName}),await d(),R(""),w(null),Z({name:"",accountNumber:"",bankName:"",currency:"NGN"})}catch(e){console.error("Error updating recipient:",e),R("Failed to update recipient")}finally{q(!1)}},T=async e=>{try{M(e),F(s=>({...s,[e]:""})),await f.tE.delete(e),await d(),F(s=>({...s,[e]:""}))}catch(a){console.error("Error deleting recipient:",a);let s=(a.message?.includes("linked to a transaction"),"Failed to delete - linked to a transaction");F(a=>({...a,[e]:s}))}finally{M(null)}},B=e=>{let s=a.find(s=>s.code===e);return s?.flag_svg||""};return r.jsx(n.J,{children:(0,r.jsxs)("div",{className:"p-4 sm:p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Recipients"}),r.jsx("p",{className:"text-gray-600",children:"Manage your saved recipients"})]}),(0,r.jsxs)(m.Vq,{open:g,onOpenChange:b,children:[r.jsx(m.hg,{asChild:!0,children:(0,r.jsxs)(i.z,{className:"bg-easner-primary hover:bg-easner-primary-600 w-full sm:w-auto",children:[r.jsx(u.Z,{className:"h-4 w-4 mr-2"}),"Add Recipient"]})}),(0,r.jsxs)(m.cZ,{className:"w-[95vw] max-w-md mx-auto",children:[r.jsx(m.fK,{children:r.jsx(m.$N,{children:"Add New Recipient"})}),r.jsx(j,{formData:P,setFormData:Z,error:E,isSubmitting:D,currencies:a,onSubmit:U})]})]})]}),(0,r.jsxs)(l.Zb,{children:[r.jsx(l.Ol,{children:(0,r.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,r.jsxs)("div",{className:"relative",children:[r.jsx(x.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),r.jsx(c.I,{placeholder:"Search recipients...",value:_,onChange:e=>k(e.target.value),className:"pl-10"})]}),r.jsx("div",{className:"flex flex-col sm:flex-row gap-2",children:(0,r.jsxs)(o.Ph,{value:C,onValueChange:S,children:[r.jsx(o.i4,{className:"w-full sm:w-32",children:r.jsx(o.ki,{placeholder:"Currency"})}),(0,r.jsxs)(o.Bw,{children:[r.jsx(o.Ql,{value:"all",children:"All Currency"}),a.map(e=>r.jsx(o.Ql,{value:e.code,children:e.code},e.code))]})]})})]})}),(0,r.jsxs)(l.aY,{children:[r.jsx("div",{className:"space-y-3",children:G.map(e=>(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between p-4 bg-white rounded-xl border border-gray-100 hover:border-easner-primary-200 transition-colors gap-4 sm:gap-0",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 flex-1",children:[(0,r.jsxs)("div",{className:"w-12 h-12 bg-easner-primary-100 rounded-full flex items-center justify-center relative flex-shrink-0",children:[r.jsx("span",{className:"text-easner-primary font-semibold text-sm",children:e.full_name.split(" ").map(e=>e[0]).join("").toUpperCase()}),r.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-4 rounded-sm overflow-hidden",children:r.jsx("div",{dangerouslySetInnerHTML:{__html:B(e.currency)},className:"w-full h-full"})})]}),(0,r.jsxs)("div",{className:"min-w-0 flex-1",children:[r.jsx("p",{className:"font-medium text-gray-900 truncate",children:e.full_name}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 truncate",children:[e.bank_name," - ",e.account_number]})]})]}),(0,r.jsxs)("div",{className:"flex flex-col items-end space-y-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-2 sm:justify-start",children:[(0,r.jsxs)(m.Vq,{open:!!v,onOpenChange:e=>!e&&w(null),children:[r.jsx(m.hg,{asChild:!0,children:r.jsx(i.z,{variant:"ghost",size:"sm",onClick:()=>V(e),className:"h-10 w-10 p-0",children:r.jsx(p.Z,{className:"h-4 w-4"})})}),(0,r.jsxs)(m.cZ,{className:"w-[95vw] max-w-md mx-auto",children:[r.jsx(m.fK,{children:r.jsx(m.$N,{children:"Edit Recipient"})}),r.jsx(j,{isEdit:!0,formData:P,setFormData:Z,error:E,isSubmitting:D,currencies:a,onSubmit:I})]})]}),r.jsx(i.z,{variant:"ghost",size:"sm",onClick:()=>T(e.id),disabled:z===e.id,className:"text-red-600 hover:text-red-700 hover:bg-red-50 h-10 w-10 p-0",children:z===e.id?r.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-red-600 border-t-transparent"}):r.jsx(h.Z,{className:"h-4 w-4"})})]}),A[e.id]&&r.jsx("p",{className:"text-xs text-red-600",children:A[e.id]})]})]},e.id))}),0===G.length&&r.jsx("div",{className:"text-center py-8 text-gray-500",children:r.jsx("p",{className:"text-sm px-4",children:_||"all"!==C?"No recipients found matching your criteria.":"No recipients added yet."})})]})]})]})})}},34474:(e,s,a)=>{"use strict";a.d(s,{Bw:()=>h,Ph:()=>o,Ql:()=>f,i4:()=>u,ki:()=>m});var r=a(10326),t=a(17577),n=a(38785),l=a(941),i=a(96633),c=a(32933),d=a(77863);let o=n.fC;n.ZA;let m=n.B4,u=t.forwardRef(({className:e,children:s,...a},t)=>(0,r.jsxs)(n.xz,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...a,children:[s,r.jsx(n.JO,{asChild:!0,children:r.jsx(l.Z,{className:"h-4 w-4 opacity-50"})})]}));u.displayName=n.xz.displayName;let x=t.forwardRef(({className:e,...s},a)=>r.jsx(n.u_,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:r.jsx(i.Z,{className:"h-4 w-4"})}));x.displayName=n.u_.displayName;let p=t.forwardRef(({className:e,...s},a)=>r.jsx(n.$G,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:r.jsx(l.Z,{className:"h-4 w-4"})}));p.displayName=n.$G.displayName;let h=t.forwardRef(({className:e,children:s,position:a="popper",...t},l)=>r.jsx(n.h_,{children:(0,r.jsxs)(n.VY,{ref:l,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...t,children:[r.jsx(x,{}),r.jsx(n.l_,{className:(0,d.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),r.jsx(p,{})]})}));h.displayName=n.VY.displayName,t.forwardRef(({className:e,...s},a)=>r.jsx(n.__,{ref:a,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...s})).displayName=n.__.displayName;let f=t.forwardRef(({className:e,children:s,...a},t)=>(0,r.jsxs)(n.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(n.wU,{children:r.jsx(c.Z,{className:"h-4 w-4"})})}),r.jsx(n.eT,{children:s})]}));f.displayName=n.ck.displayName,t.forwardRef(({className:e,...s},a)=>r.jsx(n.Z0,{ref:a,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=n.Z0.displayName},88307:(e,s,a)=>{"use strict";a.d(s,{Z:()=>r});let r=(0,a(62881).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},69508:(e,s,a)=>{"use strict";a.d(s,{Z:()=>r});let r=(0,a(62881).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},98091:(e,s,a)=>{"use strict";a.d(s,{Z:()=>r});let r=(0,a(62881).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},1357:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>r});let r=(0,a(68570).createProxy)(String.raw`D:\Users\enyoc\Documents\Dev\easner\app\user\recipients\page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),r=s.X(0,[948,609,434,730,668,585,745,168,369],()=>a(98509));module.exports=r})();