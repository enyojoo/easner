"use strict";(()=>{var e={};e.id=118,e.ids=[118],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},68621:e=>{e.exports=require("punycode")},76162:e=>{e.exports=require("stream")},17360:e=>{e.exports=require("url")},71568:e=>{e.exports=require("zlib")},26498:(e,r,s)=>{s.r(r),s.d(r,{originalPathname:()=>h,patchFetch:()=>m,requestAsyncStorage:()=>c,routeModule:()=>l,serverHooks:()=>f,staticGenerationAsyncStorage:()=>d});var o={};s.r(o),s.d(o,{POST:()=>p});var t=s(49303),a=s(88716),n=s(60670),i=s(87070),u=s(85662);async function p(e){try{let{email:r}=await e.json();if(!r)return i.NextResponse.json({error:"Email is required"},{status:400});let s=(0,u.lx)();console.log("Processing forgot password for:",r);let{data:o,error:t}=await s.from("users").select("email").eq("email",r).single();if(t||!o)return console.log("User not found:",r),i.NextResponse.json({message:"If an account with this email exists, you will receive a verification code."});let{error:a}=await s.auth.resetPasswordForEmail(r,{redirectTo:`${process.env.NEXT_PUBLIC_SITE_URL}/reset-password`});if(a)return console.error("Error sending reset email:",a),i.NextResponse.json({error:"Failed to send verification code"},{status:500});return console.log("Password reset email sent successfully for:",r),i.NextResponse.json({message:"Verification code sent to your email address"})}catch(e){return console.error("Forgot password error:",e),i.NextResponse.json({error:"Internal server error"},{status:500})}}let l=new t.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/auth/forgot-password/route",pathname:"/api/auth/forgot-password",filename:"route",bundlePath:"app/api/auth/forgot-password/route"},resolvedPagePath:"D:\\Users\\enyoc\\Documents\\Dev\\easner\\app\\api\\auth\\forgot-password\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:c,staticGenerationAsyncStorage:d,serverHooks:f}=l,h="/api/auth/forgot-password/route";function m(){return(0,n.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:d})}},85662:(e,r,s)=>{s.d(r,{OQ:()=>n,lx:()=>i});var o=s(69498);let t=process.env.NEXT_PUBLIC_SUPABASE_URL||"https://placeholder.supabase.co",a=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"placeholder-key",n=(0,o.eI)(t,a,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,flowType:"pkce"}}),i=()=>{let e=process.env.SUPABASE_SERVICE_ROLE_KEY;if(!e){if(!process.env.VERCEL)throw Error("Missing SUPABASE_SERVICE_ROLE_KEY environment variable");return(0,o.eI)(t,a,{auth:{persistSession:!1,autoRefreshToken:!1}})}return(0,o.eI)(t,e,{auth:{persistSession:!1,autoRefreshToken:!1}})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),o=r.X(0,[948,338],()=>s(26498));module.exports=o})();