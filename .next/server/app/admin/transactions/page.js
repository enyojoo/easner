(()=>{var e={};e.id=454,e.ids=[454],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},17360:e=>{"use strict";e.exports=require("url")},71568:e=>{"use strict";e.exports=require("zlib")},27697:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>h,tree:()=>d}),t(40971),t(90596),t(22662),t(35866);var a=t(23191),n=t(88716),r=t(37922),i=t.n(r),l=t(95231),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);t.d(s,c);let d=["",{children:["admin",{children:["transactions",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,40971)),"D:\\Users\\enyoc\\Documents\\Dev\\easner\\app\\admin\\transactions\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,90596)),"D:\\Users\\enyoc\\Documents\\Dev\\easner\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,22662)),"D:\\Users\\enyoc\\Documents\\Dev\\easner\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],o=["D:\\Users\\enyoc\\Documents\\Dev\\easner\\app\\admin\\transactions\\page.tsx"],x="/admin/transactions/page",m={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/admin/transactions/page",pathname:"/admin/transactions",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},50531:(e,s,t)=>{Promise.resolve().then(t.bind(t,72520))},72520:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>P});var a=t(10326),n=t(17577),r=t(37706),i=t(33071),l=t(90772),c=t(54432),d=t(567),o=t(34474),x=t(62288),m=t(15940),h=t(53313),u=t(48998),j=t(41291);let p=(0,t(62881).Z)("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);var g=t(30361),v=t(69669),y=t(31540),N=t(41137),f=t(88307),_=t(12714),w=t(15919),b=t(60097),C=t(29015),k=t(98705),D=t(22068);function P(){let{data:e}=(0,k.Q)(),[s,t]=(0,n.useState)(""),[P,z]=(0,n.useState)("all"),[S,A]=(0,n.useState)("all"),[Z,R]=(0,n.useState)([]),[U,q]=(0,n.useState)(null),T=(e?.transactions||[]).filter(e=>{let t=""===s||e.transaction_id.toLowerCase().includes(s.toLowerCase())||e.user?.email?.toLowerCase().includes(s.toLowerCase()),a="all"===P||e.status===P,n="all"===S||e.send_currency===S||e.receive_currency===S;return t&&a&&n}),M=e=>{let s={pending:{color:"bg-yellow-100 text-yellow-800",icon:a.jsx(u.Z,{className:"h-3 w-3 mr-1"})},processing:{color:"bg-blue-100 text-blue-800",icon:a.jsx(j.Z,{className:"h-3 w-3 mr-1"})},initiated:{color:"bg-purple-100 text-purple-800",icon:a.jsx(p,{className:"h-3 w-3 mr-1"})},completed:{color:"bg-green-100 text-green-800",icon:a.jsx(g.Z,{className:"h-3 w-3 mr-1"})},failed:{color:"bg-red-100 text-red-800",icon:a.jsx(v.Z,{className:"h-3 w-3 mr-1"})}},t=s[e]||s.pending;return(0,a.jsxs)(d.C,{className:`${t.color} hover:${t.color} flex items-center`,children:[t.icon,e.charAt(0).toUpperCase()+e.slice(1)]})},Q=(e,s)=>{s?R([...Z,e]):R(Z.filter(s=>s!==e))},G=async(e,s)=>{try{await D.Z.updateTransactionStatus(e,s),U?.transaction_id===e&&q(e=>e?{...e,status:s}:null)}catch(e){console.error("Error updating transaction status:",e)}},L=async e=>{try{await Promise.all(Z.map(s=>D.Z.updateTransactionStatus(s,e))),R([])}catch(e){console.error("Error updating transaction statuses:",e)}};return a.jsx(r.Q,{children:(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Transaction Management"}),a.jsx("p",{className:"text-gray-600",children:"Monitor and manage all platform transactions"})]}),(0,a.jsxs)(l.z,{onClick:()=>{let e=new Blob([["Transaction ID,Date,User,From,To,Send Amount,Receive Amount,Status,Recipient",...T.map(e=>[e.transaction_id,new Date(e.created_at).toLocaleString(),`${e.user?.first_name} ${e.user?.last_name}`,e.send_currency,e.receive_currency,e.send_amount,e.receive_amount,e.status,e.recipient?.full_name||""].join(","))].join("\n")],{type:"text/csv"}),s=window.URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download="transactions.csv",t.click()},variant:"outline",children:[a.jsx(y.Z,{className:"h-4 w-4 mr-2"}),"Export Data"]})]}),(0,a.jsxs)(i.Zb,{children:[a.jsx(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center gap-2",children:[a.jsx(N.Z,{className:"h-5 w-5"}),"Filters"]})}),a.jsx(i.aY,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"relative",children:[a.jsx(f.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx(c.I,{placeholder:"Search transactions...",value:s,onChange:e=>t(e.target.value),className:"pl-10"})]}),(0,a.jsxs)(o.Ph,{value:P,onValueChange:z,children:[a.jsx(o.i4,{children:a.jsx(o.ki,{placeholder:"All Status"})}),(0,a.jsxs)(o.Bw,{children:[a.jsx(o.Ql,{value:"all",children:"All Status"}),a.jsx(o.Ql,{value:"pending",children:"Pending"}),a.jsx(o.Ql,{value:"processing",children:"Processing"}),a.jsx(o.Ql,{value:"initiated",children:"Initiated"}),a.jsx(o.Ql,{value:"completed",children:"Completed"}),a.jsx(o.Ql,{value:"failed",children:"Failed"})]})]}),(0,a.jsxs)(o.Ph,{value:S,onValueChange:A,children:[a.jsx(o.i4,{children:a.jsx(o.ki,{placeholder:"All Currencies"})}),(0,a.jsxs)(o.Bw,{children:[a.jsx(o.Ql,{value:"all",children:"All Currencies"}),a.jsx(o.Ql,{value:"NGN",children:"NGN"}),a.jsx(o.Ql,{value:"RUB",children:"RUB"})]})]})]})})]}),Z.length>0&&a.jsx(i.Zb,{children:a.jsx(i.aY,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[Z.length," transaction(s) selected"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(l.z,{size:"sm",variant:"outline",onClick:()=>L("processing"),children:"Payment Received"}),a.jsx(l.z,{size:"sm",variant:"outline",onClick:()=>L("initiated"),children:"Transfer Initiated"}),a.jsx(l.z,{size:"sm",variant:"outline",onClick:()=>L("completed"),children:"Transfer Complete"}),a.jsx(l.z,{size:"sm",variant:"outline",onClick:()=>L("failed"),children:"Mark Failed"})]})]})})}),a.jsx(i.Zb,{children:(0,a.jsxs)(i.aY,{children:[(0,a.jsxs)(m.iA,{children:[a.jsx(m.xD,{children:(0,a.jsxs)(m.SC,{children:[a.jsx(m.ss,{className:"w-12",children:a.jsx(h.X,{checked:Z.length===T.length&&T.length>0,onCheckedChange:e=>{e?R(T.map(e=>e.transaction_id)):R([])}})}),a.jsx(m.ss,{children:"Transaction ID"}),a.jsx(m.ss,{children:"Date"}),a.jsx(m.ss,{children:"User"}),a.jsx(m.ss,{children:"Currency Pair"}),a.jsx(m.ss,{children:"Amount"}),a.jsx(m.ss,{children:"Status"}),a.jsx(m.ss,{children:"Actions"})]})}),a.jsx(m.RM,{children:T.map(e=>(0,a.jsxs)(m.SC,{children:[a.jsx(m.pj,{children:a.jsx(h.X,{checked:Z.includes(e.transaction_id),onCheckedChange:s=>Q(e.transaction_id,s)})}),a.jsx(m.pj,{className:"font-mono text-sm",children:e.transaction_id}),a.jsx(m.pj,{children:new Date(e.created_at).toLocaleString()}),a.jsx(m.pj,{children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-medium",children:[e.user?.first_name," ",e.user?.last_name]}),a.jsx("div",{className:"text-sm text-gray-500",children:e.user?.email})]})}),a.jsx(m.pj,{children:(0,a.jsxs)("span",{className:"font-medium",children:[e.send_currency," → ",e.receive_currency]})}),a.jsx(m.pj,{children:(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-medium",children:(0,C.xG)(e.send_amount,e.send_currency)}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["→ ",(0,C.xG)(e.receive_amount,e.receive_currency)]})]})}),a.jsx(m.pj,{children:M(e.status)}),a.jsx(m.pj,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(x.Vq,{children:[a.jsx(x.hg,{asChild:!0,children:a.jsx(l.z,{variant:"outline",size:"sm",onClick:()=>q(e),children:a.jsx(_.Z,{className:"h-4 w-4"})})}),(0,a.jsxs)(x.cZ,{className:"max-w-2xl",children:[a.jsx(x.fK,{children:a.jsx(x.$N,{children:"Transaction Details"})}),U&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Transaction ID"}),a.jsx("p",{className:"font-mono",children:U.transaction_id})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Status"}),a.jsx("div",{className:"mt-1",children:M(U.status)})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-600",children:"User"}),(0,a.jsxs)("p",{children:[U.user?.first_name," ",U.user?.last_name]}),a.jsx("p",{className:"text-sm text-gray-500",children:U.user?.email})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Date"}),a.jsx("p",{children:new Date(U.created_at).toLocaleString()})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Send Amount"}),a.jsx("p",{className:"font-medium",children:(0,C.xG)(U.send_amount,U.send_currency)})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Receive Amount"}),a.jsx("p",{className:"font-medium",children:(0,C.xG)(U.receive_amount,U.receive_currency)})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Recipient"}),a.jsx("p",{children:U.recipient?.full_name}),a.jsx("p",{className:"text-sm text-gray-500",children:U.recipient?.bank_name}),a.jsx("p",{className:"text-sm text-gray-500",children:U.recipient?.account_number})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Exchange Rate"}),(0,a.jsxs)("p",{className:"font-medium",children:["1 ",U.send_currency," = ",U.exchange_rate," ",U.receive_currency]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Receipt"}),U.receipt_url?a.jsx("div",{className:"mt-1",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-lg",children:[a.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:a.jsx(g.Z,{className:"h-4 w-4 text-green-600"})}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:U.receipt_filename||"Receipt"}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Uploaded ",new Date(U.updated_at).toLocaleString()]})]}),(0,a.jsxs)(l.z,{variant:"outline",size:"sm",onClick:()=>window.open(U.receipt_url,"_blank"),children:[a.jsx(_.Z,{className:"h-4 w-4 mr-1"}),"View"]})]})}):a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"No receipt uploaded"})]}),(0,a.jsxs)("div",{className:"border-t pt-4",children:[a.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Update Status"}),(0,a.jsxs)("div",{className:"flex gap-2 mt-2",children:[a.jsx(l.z,{size:"sm",variant:"outline",onClick:()=>G(U.transaction_id,"processing"),children:"Payment Received"}),a.jsx(l.z,{size:"sm",variant:"outline",onClick:()=>G(U.transaction_id,"initiated"),children:"Transfer Initiated"}),a.jsx(l.z,{size:"sm",variant:"outline",onClick:()=>G(U.transaction_id,"completed"),children:"Transfer Complete"}),a.jsx(l.z,{size:"sm",variant:"outline",onClick:()=>G(U.transaction_id,"failed"),className:"text-red-600 hover:text-red-700",children:"Mark Failed"})]})]})]})]})]}),(0,a.jsxs)(b.h_,{children:[a.jsx(b.$F,{asChild:!0,children:a.jsx(l.z,{variant:"outline",size:"sm",children:a.jsx(w.Z,{className:"h-4 w-4"})})}),(0,a.jsxs)(b.AW,{align:"end",children:[a.jsx(b.Xi,{onClick:()=>G(e.transaction_id,"processing"),children:"Payment Received"}),a.jsx(b.Xi,{onClick:()=>G(e.transaction_id,"initiated"),children:"Transfer Initiated"}),a.jsx(b.Xi,{onClick:()=>G(e.transaction_id,"completed"),children:"Transfer Complete"}),a.jsx(b.Xi,{onClick:()=>G(e.transaction_id,"failed"),className:"text-red-600",children:"Mark as Failed"})]})]})]})})]},e.id))})]}),0===T.length&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:"No transactions found matching your criteria."})]})})]})})}},40971:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`D:\Users\enyoc\Documents\Dev\easner\app\admin\transactions\page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[948,609,434,730,668,299,585,391,565],()=>t(27697));module.exports=a})();