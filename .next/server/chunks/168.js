exports.id=168,exports.ids=[168],exports.modules={91890:(e,t,s)=>{Promise.resolve().then(s.bind(s,77123))},77123:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(10326),a=s(47427),i=s(77506);function n({children:e}){let{isChecking:t}=(0,a.b)({requireAuth:!0});return t?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:r.jsx(i.Z,{className:"h-8 w-8 animate-spin text-easner-primary"})}):r.jsx(r.Fragment,{children:e})}},35545:(e,t,s)=>{"use strict";s.d(t,{J:()=>I});var r=s(10326),a=s(17577),i=s(90434),n=s(35047),l=s(24319),c=s(69436),h=s(62881);let d=(0,h.Z)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);var o=s(24061),u=s(79635);let f=(0,h.Z)("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var m=s(94019),x=s(71810),y=s(15919),v=s(24166),p=s(90772),g=s(51813),j=s(60097);let w=[{name:"Dashboard",href:"/user/dashboard",icon:l.Z},{name:"Send Money",href:"/user/send",icon:c.Z},{name:"Transactions",href:"/user/transactions",icon:d},{name:"Recipients",href:"/user/recipients",icon:o.Z},{name:"Profile",href:"/user/profile",icon:u.Z},{name:"Support",href:"/user/support",icon:f}],b=[{name:"Dashboard",href:"/user/dashboard",icon:l.Z},{name:"Transactions",href:"/user/transactions",icon:d},{name:"Send Money",href:"/user/send",icon:c.Z,isPrimary:!0},{name:"Recipients",href:"/user/recipients",icon:o.Z}],N=[{name:"Profile",href:"/user/profile",icon:u.Z},{name:"Support",href:"/user/support",icon:f}];function I({children:e}){let t=(0,n.usePathname)(),s=(0,n.useRouter)(),[l,c]=(0,a.useState)(!1),{signOut:h}=(0,g.a)(),d=async()=>{await h(),s.push("/login")};return(0,r.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[l&&r.jsx("div",{className:"fixed inset-0 z-40 lg:hidden",children:r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>c(!1)})}),r.jsx("div",{className:`fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out lg:relative lg:translate-x-0 hidden lg:flex ${l?"translate-x-0":"-translate-x-full lg:translate-x-0"}`,children:(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-6 h-16 border-b border-gray-200",children:[r.jsx(v.O,{size:"md"}),r.jsx(p.z,{variant:"ghost",size:"sm",className:"lg:hidden",onClick:()=>c(!1),children:r.jsx(m.Z,{className:"h-5 w-5"})})]}),r.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2",children:w.map(e=>{let s=t===e.href;return(0,r.jsxs)(i.default,{href:e.href,className:`flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${s?"bg-easner-primary-100 text-easner-primary":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,onClick:()=>c(!1),children:[r.jsx(e.icon,{className:"mr-3 h-5 w-5"}),e.name]},e.name)})}),r.jsx("div",{className:"px-4 py-4 border-t border-gray-200",children:(0,r.jsxs)(p.z,{variant:"ghost",className:"w-full justify-start text-gray-600 hover:text-gray-900 hover:bg-gray-100",onClick:d,children:[r.jsx(x.Z,{className:"mr-3 h-5 w-5"}),"Logout"]})})]})}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[r.jsx("div",{className:"bg-white border-b border-gray-200 px-4 h-16 items-center sm:px-6 lg:px-8 hidden lg:flex",children:r.jsx("div",{className:"flex items-center justify-between w-full",children:r.jsx("div",{className:"flex-1"})})}),r.jsx("div",{className:"bg-white border-b border-gray-200 px-4 h-16 flex items-center sm:px-6 lg:hidden",children:r.jsx("div",{className:"flex items-center justify-center w-full",children:r.jsx(v.O,{size:"sm"})})}),r.jsx("main",{className:"flex-1 overflow-y-auto pb-20 lg:pb-0",children:e}),r.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 lg:hidden z-40",children:(0,r.jsxs)("div",{className:"flex justify-around items-center py-3 px-2",children:[b.map(e=>{let s=t===e.href;return e.isPrimary?r.jsx(i.default,{href:e.href,className:"flex flex-col items-center justify-center p-2 min-w-0 flex-1",children:r.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center bg-easner-primary",children:r.jsx(e.icon,{className:"h-6 w-6 text-white"})})},e.name):r.jsx(i.default,{href:e.href,className:"flex flex-col items-center justify-center p-2 min-w-0 flex-1",children:r.jsx(e.icon,{className:`h-6 w-6 ${s?"text-easner-primary":"text-gray-600"}`})},e.name)}),(0,r.jsxs)(j.h_,{children:[r.jsx(j.$F,{asChild:!0,children:r.jsx("button",{className:"flex flex-col items-center justify-center p-2 min-w-0 flex-1",children:r.jsx(y.Z,{className:`h-6 w-6 ${["/user/profile","/user/support"].includes(t)?"text-easner-primary":"text-gray-600"}`})})}),(0,r.jsxs)(j.AW,{align:"end",side:"top",className:"mb-2",children:[N.map(e=>r.jsx(j.Xi,{asChild:!0,children:(0,r.jsxs)(i.default,{href:e.href,className:"flex items-center",children:[r.jsx(e.icon,{className:"mr-2 h-4 w-4"}),e.name]})},e.name)),(0,r.jsxs)(j.Xi,{onClick:d,children:[r.jsx(x.Z,{className:"mr-2 h-4 w-4"}),"Logout"]})]})]})]})})]})]})}},47427:(e,t,s)=>{"use strict";s.d(t,{b:()=>n});var r=s(17577),a=s(35047),i=s(51813);function n(e={}){let{user:t,userProfile:s,loading:n,isAdmin:l}=(0,i.a)();(0,a.useRouter)(),(0,a.usePathname)();let[c,h]=(0,r.useState)(!0),[d,o]=(0,r.useState)(!1),{requireAuth:u=!0,adminOnly:f=!1,redirectTo:m="/login"}=e;return{isChecking:n||c,isAuthorized:d,user:t,userProfile:s,isAdmin:l}}},40934:(e,t,s)=>{"use strict";s.d(t,{v:()=>c});var r=s(17577),a=s(38760);class i{subscribe(e){return this.listeners.add(e),this.updateActivity(),()=>this.listeners.delete(e)}notify(){this.updateActivity(),this.listeners.forEach(e=>{try{e()}catch(e){console.error("Error in data store listener:",e)}})}updateActivity(){this.lastActivity=Date.now()}async initialize(e){if(this.updateActivity(),this.currentUserId===e&&this.isDataFresh())return this.data;if(this.isLoading&&this.currentUserId===e&&this.loadingPromise)return this.loadingPromise;this.currentUserId=e,this.loadingPromise=this.loadData(e);let t=await this.loadingPromise;return this.startBackgroundRefresh(e),this.startActivityMonitoring(),t}async loadData(e,t=!1){if(this.isLoading&&!t)return this.data;try{this.isLoading=!0,this.updateActivity();let s=new Promise((e,t)=>setTimeout(()=>t(Error("Data loading timeout")),15e3)),r=Promise.allSettled([a.yE.getAll(),a.yE.getExchangeRates(),a.Ov.getByUserId(e,20),a.tE.getByUserId(e)]),i=await Promise.race([r,s]),n="fulfilled"===i[0].status?i[0].value||[]:this.data.currencies,l="fulfilled"===i[1].status?i[1].value||[]:this.data.exchangeRates,c="fulfilled"===i[2].status?i[2].value||[]:this.data.transactions,h="fulfilled"===i[3].status?i[3].value||[]:this.data.recipients;return this.data={transactions:c,recipients:h,currencies:n,exchangeRates:l,lastUpdated:Date.now()},t||this.notify(),this.data}catch(e){return console.error("Error loading user data:",e),this.data}finally{this.isLoading=!1,this.loadingPromise=null}}isDataFresh(){return Date.now()-this.data.lastUpdated<6e4}startBackgroundRefresh(e){this.refreshInterval&&clearInterval(this.refreshInterval),this.refreshInterval=setInterval(async()=>{try{let t=Date.now()-3e5;this.lastActivity>t&&await this.loadData(e,!0)}catch(e){console.error("Background refresh error:",e)}},6e4)}startActivityMonitoring(){this.activityCheckInterval&&clearInterval(this.activityCheckInterval),this.activityCheckInterval=setInterval(()=>{let e=Date.now()-6e5;this.lastActivity<e&&this.refreshInterval&&(clearInterval(this.refreshInterval),this.refreshInterval=null)},3e4)}getData(){return this.updateActivity(),this.data}getTransactions(){return this.updateActivity(),this.data.transactions}getRecipients(){return this.updateActivity(),this.data.recipients}getCurrencies(){return this.updateActivity(),this.data.currencies}getExchangeRates(){return this.updateActivity(),this.data.exchangeRates}async refreshRecipients(e){try{this.updateActivity();let t=await a.tE.getByUserId(e);this.data.recipients=t||[],this.data.lastUpdated=Date.now(),this.notify()}catch(e){console.error("Error refreshing recipients:",e)}}async refreshTransactions(e){try{this.updateActivity();let t=await a.Ov.getByUserId(e,20);this.data.transactions=t||[],this.data.lastUpdated=Date.now(),this.notify()}catch(e){console.error("Error refreshing transactions:",e)}}async forceRefresh(e){return this.updateActivity(),await this.loadData(e)}cleanup(){this.refreshInterval&&(clearInterval(this.refreshInterval),this.refreshInterval=null),this.activityCheckInterval&&(clearInterval(this.activityCheckInterval),this.activityCheckInterval=null),this.listeners.clear(),this.currentUserId=null,this.loadingPromise=null}constructor(){this.data={transactions:[],recipients:[],currencies:[],exchangeRates:[],lastUpdated:0},this.listeners=new Set,this.refreshInterval=null,this.currentUserId=null,this.isLoading=!1,this.loadingPromise=null,this.lastActivity=Date.now(),this.activityCheckInterval=null}}let n=new i;var l=s(51813);function c(){let{userProfile:e}=(0,l.a)(),[t,s]=(0,r.useState)(n.getData()),[a,i]=(0,r.useState)(!1),[c,h]=(0,r.useState)(null),d=(0,r.useRef)(!0),o=(0,r.useCallback)(()=>{if(e?.id&&d.current)return n.refreshRecipients(e.id)},[e?.id]),u=(0,r.useCallback)(()=>{if(e?.id&&d.current)return n.refreshTransactions(e.id)},[e?.id]),f=(0,r.useCallback)(()=>{if(e?.id&&d.current)return n.forceRefresh(e.id)},[e?.id]);return{transactions:t.transactions,recipients:t.recipients,currencies:t.currencies,exchangeRates:t.exchangeRates,loading:a,error:c,refreshRecipients:o,refreshTransactions:u,forceRefresh:f}}},69436:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},85476:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(68570).createProxy)(String.raw`D:\Users\enyoc\Documents\Dev\easner\app\user\layout.tsx#default`)}};